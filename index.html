<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BPGT Terminal System</title>

    <!-- PWA: Makes Chrome bar disappear when installed -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BPGT">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#1e3a8a">
    <meta name="mobile-web-app-capable" content="yes">

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('service-worker.js')
            .catch(e => console.log('SW:', e));
        });
      }
    </script>

    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        html, body {
            width: 100%;
            min-height: 100vh;
            background: linear-gradient(160deg, #1e3a8a 0%, #1d4ed8 50%, #1e40af 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-wrapper {
            width: 100%;
            max-width: 420px;
            padding: 20px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 28px;
        }
        .login-logo {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            border: 4px solid rgba(255,255,255,0.4);
            margin-bottom: 14px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
        }
        .login-title {
            font-size: 20px;
            font-weight: 800;
            color: white;
            letter-spacing: 0.5px;
        }
        .login-subtitle {
            font-size: 13px;
            color: rgba(255,255,255,0.75);
            margin-top: 4px;
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 28px 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .form-group { margin-bottom: 18px; }
        .form-group label {
            display: block;
            font-size: 12px;
            font-weight: 700;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            color: #1e293b;
            transition: border-color 0.2s;
            background: #f8fafc;
        }
        .form-group input:focus {
            outline: none;
            border-color: #1e3a8a;
            background: white;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #1e3a8a, #1d4ed8);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(30,58,138,0.4);
            transition: all 0.2s;
        }
        .login-btn:active { transform: scale(0.98); }

        .login-links {
            text-align: center;
            margin-top: 16px;
            font-size: 13px;
            color: #64748b;
        }
        .login-links a { color: #1d4ed8; text-decoration: none; }

        .error-msg {
            background: #fee2e2;
            color: #991b1b;
            border: 1.5px solid #ef4444;
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 13px;
            margin-bottom: 14px;
            display: none;
        }

        .footer-brand {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: rgba(255,255,255,0.45);
        }
    </style>
</head>
<body>

<div class="login-wrapper">
    <div class="login-header">
        <img src="bpgt-logo.png" alt="BPGT Logo" class="login-logo"
             onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2250%22 fill=%22%231e3a8a%22/><text y=%22.9em%22 font-size=%2240%22 x=%2250%22 text-anchor=%22middle%22 fill=%22white%22 font-family=%22Arial%22>üöå</text></svg>'">
        <div class="login-title">BROOKE'S POINT GRAND TERMINAL</div>
        <div class="login-subtitle">Passenger & Revenue Monitoring System</div>
    </div>

    <div class="login-card">
        <div class="error-msg" id="error-msg"></div>

        <div class="form-group">
            <label>Username</label>
            <input type="text" id="username" placeholder="Enter your username"
                   autocomplete="username" autocapitalize="none" autocorrect="off">
        </div>

        <div class="form-group">
            <label>Password</label>
            <input type="password" id="password" placeholder="Enter your password"
                   autocomplete="current-password">
        </div>

        <button class="login-btn" onclick="doLoginClick()">üîê LOGIN</button>

        <div class="login-links">
            <a href="#" onclick="showRegister()">Create Account</a>
            &nbsp;|&nbsp;
            <a href="#" onclick="showForgotPassword()">Forgot Password?</a>
        </div>
    </div>

    <div class="footer-brand">-=pagong=- üê¢ &nbsp;|&nbsp; BPGT Terminal System v4.5</div>
</div>

<script src="auth.js"></script>
<script>
    // Allow Enter key to login
    async function doLoginClick() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const errEl = document.getElementById('error-msg');

    if (!username || !password) {
        errEl.textContent = '‚ö†Ô∏è Please enter username and password!';
        errEl.style.display = 'block';
        return;
    }

    const btn = document.querySelector('.login-btn');
    btn.textContent = '‚è≥ Logging in...';
    btn.disabled = true;
    errEl.style.display = 'none';

    const result = await login(username, password);

    if (result.success) {
        sessionStorage.setItem('bpgt_user', JSON.stringify(result.user));
        window.location.href = result.user.role === 'admin' ? 'admin.html' : 'app.html';
    } else {
        errEl.textContent = '‚ùå ' + (result.message || 'Login failed. Check username and password.');
        errEl.style.display = 'block';
        btn.textContent = 'üîê LOGIN';
        btn.disabled = false;
    }
}

document.getElementById('password').addEventListener('keydown', e => {
    if (e.key === 'Enter') doLoginClick();
});
document.getElementById('username').addEventListener('keydown', e => {
    if (e.key === 'Enter') document.getElementById('password').focus();
});
```

**Commit ‚Üí Staff can log in again!** ‚úÖ

---

## üñºÔ∏è **FIX 2: ICON REPLACEMENT GUIDE**

**You said you already have the icons renamed ‚Äî here's how to upload them!**

### **Step 1: Go to your GitHub repo**

### **Step 2: Click on the OLD icon file**
For example click `icon-192.png`

### **Step 3: Look at top right ‚Äî click the 3 dots (‚Ä¢‚Ä¢‚Ä¢) or the upload button**

You'll see options including:
> **"Delete file"** or look for a way to replace

### **Actually the easiest way on GitHub:**

**Step 1:** On your repo main page, click **"Add file"** button (top right area)

**Step 2:** Click **"Upload files"**

**Step 3:** Drag ALL your renamed icon files at once:
```
icon-72.png
icon-96.png
icon-128.png
icon-144.png
icon-152.png
icon-192.png
icon-384.png
icon-512.png
```

**Step 4:** GitHub will say "these files already exist ‚Äî replace them?"
Click **YES / Replace**

**Step 5:** Scroll down ‚Üí Click **"Commit changes"**

**Step 6:** Wait 2 minutes

---

## üì± **Step 7: Reinstall PWA on phone**

After committing:

1. **Uninstall** the old BPGT icon from home screen
2. Open **Chrome** ‚Üí go to your app URL
3. Hard refresh *(hold reload ‚Üí Hard reload)*
4. Tap **‚ãÆ ‚Üí Add to Home Screen**
5. Tap **Add**
6. **Your real BPGT logo appears!** üéâ

---

## üìã **PRIORITY ORDER RIGHT NOW:**
```
1. ‚úÖ Fix login (index.html script block above)
2. ‚úÖ Commit and test ‚Äî can staff log in?
3. ‚úÖ Upload icons (drag and drop all 8)
4. ‚úÖ Reinstall PWA on phone
5. ‚úÖ Test ticket section working
</script>

</body>
</html>
